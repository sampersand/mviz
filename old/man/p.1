.\" Automatically generated by Pandoc 3.7.0.2
.\"
.TH "p" "1" "" "" "General Commands Manual"
.SH NAME
p \- visualize invisible and invalid bytes in different encodings.
.SH SYNOPSIS
.PP
\f[B]p\f[R] [\f[B]options\f[R]]
.PD 0
.P
.PD
\f[B]p\f[R] [\f[B]options\f[R]] [\f[I]string\f[R] \f[I]\&...\f[R]]
.PD 0
.P
.PD
\f[B]p\f[R] \-f [\f[B]options\f[R]] [\f[I]file\f[R] \f[I]\&...\f[R]]
.SH DESCRIPTION
\f[B]p\f[R] is an \(lqescaper,\(rq converting bytes from their source
representation to a more human\-understandable one.
There are many options to control which bytes are converted (which, by
default, is invisible ASCII bytes, and invalid UTF\-8) and also how the
bytes are visualized.
.PP
\f[B]p\f[R] is designed with sane defaults, and most users don\(cqt need
to muck around with the.
.PP
\f[B]p\f[R] normally works on a \(lqdefault charset,\(rq which all the
short\-forms (eg \f[CR]\-x\f[R]) and value\-less flags (eg
\f[CR]\-\-hex\f[R]) work on by default.
This charset can be changed with
\f[CR]\-\-default\-charset=CHARSET\f[R], or disabled entirely with
\f[CR]\-\-no\-default\-charset\f[R] (where only explicitly\-selected
options are used).
.PP
In addition to the default charset, options for specific ranges (eg
\f[CR]\-\-delete=a\-d\f[R]) may be specified; these take priority over
the default, and are evaluated in a last\-specified\-first\-evaluated
order.
.SH GENERIC OPTIONS
.TP
\f[B]\f[CB]\-h\f[B]\f[R], \f[B]\f[CB]\-\-help\f[B]\f[R]
Show the help message and exit.
\f[CR]\-h\f[R] Shows a shorter help message.
.TP
\f[B]\f[CB]\-\-version\f[B]\f[R]
Print the version and exit.
.TP
\f[B]\f[CB]\-f\f[B]\f[R], \f[B]\f[CB]\-\-files\f[B]\f[R], \f[B]\f[CB]\-\-no\-files\f[B]\f[R]
Interpret trailing options as filenames to read.
Without this option, contrary to UNIX\-philosophy, all arguments are
interpreted as string literals, and are escaped as\-is.
(This is because by the most common use\-case for \f[CR]p\f[R] is to
visualize strings, not files).
The \f[CR]\-\-no\-files\f[R] option disables an earlier
\f[CR]\-\-files\f[R], causing all arguments to be interpreted as string
literals again.
.TP
\f[B]\f[CB]\-\-malformed\-error\f[B]\f[R], \f[B]\f[CB]\-\-no\-malformed\-error\f[B]\f[R]
(Enabled by default.)
Causes the program to exit with status code \f[CR]1\f[R] if any invalid
characters for the \f[B]ENCODING\f[R] are encountered.
This will not abort the program prematurely, and simply changes the
final status.
.TP
\f[B]\f[CB]\-c\f[B]\f[R], \f[B]\f[CB]\-\-check\-escapes\f[B]\f[R], \f[B]\f[CB]\-\-no\-check\-escapes\f[B]\f[R]
Causes the program to exit with status code \f[CR]1\f[R] if
\f[I]any\f[R] character is escaped.
Note that the \f[CR]\-\-print\f[R] \f[B]ACTION\f[R] is not considered
\(lqescaping\(rq a character.
.TP
\f[B]\f[CB]\-q\f[B]\f[R], \f[B]\f[CB]\-\-quiet\f[B]\f[R], \f[B]\f[CB]\-\-no\-quiet\f[B]\f[R]
Do not output anything.
Useful with \f[CR]\-\-check\-escapes\f[R] and
\f[CR]\-\-malformed\-error\f[R] to programmatically see if an input is
\(lqnormal.\(rq
.TP
\f[B]\f[CB]\-\-color\f[B]\f[R], \f[B]\f[CB]\-\-no\-color\f[B]\f[R], \f[B]\f[CB]\-\-color=\f[B]\f[BI]auto/always/never\f[B]\f[R]
Changes the visual effects, including both usage messages and
\(lqstandouts\(rq added to escaped characters.
\f[CR]\-\-color\f[R] (and \f[CR]\-\-color=always\f[R]) enables them,
\f[CR]\-\-no\-color\f[R] (and \f[CR]\-\-color=never\f[R]) disables them,
and \f[CR]\-\-color=auto\f[R] resets them to the default value.
The \f[I]auto\f[R] color is done as follows: First, if
\f[CR]FORCE_COLOR\f[R] is present in the environment and non\-empty,
then colors are enabled.
Second, if \f[CR]NO_COLOR\f[R] is present in the environment and
non\-empty, then colors are disabled.
Lastly, colors are enabled if stdout is a tty.
.TP
\f[B]\f[CB]\-\-prefixes\f[B]\f[R]
(Defaults to enable if stdout is a tty, and any arguments are given.)
Adds \(lqprefixes\(rq to arguments.
For string arguments (ie without \f[CR]\-\-files\f[R]), this is their
positional number (after all flags are removed).
For files, this is a header containing the name of the file.
Mutually exclusive with \f[CR]\-\-one\-per\-line\f[R] and
\f[CR]\-\-no\-prefixes\-or\-newline\f[R].
.TP
\f[B]\f[CB]\-1\f[B]\f[R], \f[B]\f[CB]\-\-one\-per\-line\f[B]\f[R]
(Defaults when \f[CR]\-\-prefixes\f[R] isn\(cqt.)
Print each argument on its own line.
Mutually exclusive with \f[CR]\-\-prefixes\f[R] and
\f[CR]\-\-no\-prefixes\-or\-newline\f[R]
.TP
\f[B]\f[CB]\-n\f[B]\f[R], \f[B]\f[CB]\-\-no\-prefixes\-or\-newline\f[B]\f[R]
Disables prefixes, and separates arguments with spaces.
.SH ESCAPES
Specify how characters should be escaped.
Flags which optionally take a \f[B]CHARSET\f[R] set the default action
if no charset is supplied.
Actions with explicit charsets are checked first, and ties go to the
last one specified.
If no charset matches, the default one is used.
Shorthand options are like the their corresponding long\-form one,
except they don\(cqt take an argument, and only work on the default
charset.
.PP
If more than pattern matches, the last one supplied on the command line
wins.
.TP
\f[B]\f[CB]\-\-default\-charset\f[B]=\f[BI]CHARSET\f[B]\f[R]
Explicitly set the default charset that flags without
\f[B]\f[BI]CHARSET\f[B]\f[R] values use.
The default value is \f[CR]\(rsx00\-\(rsx1F\(rsx7F\f[R], with an
additional \f[CR]\(rsx80\-\(rsxFF\f[R] if the binary \f[B]ENCODING\f[R]
is used.
Additionally, if not using colors and using the default action,
backslash (\f[CR]\(rs\(rs\f[R]) is added to this charset list.
.TP
\f[B]\f[CB]\-\-no\-default\-charset\f[B]\f[R]
Disables the default charset so that only \f[B]ESCAPES\f[R] woth
explicit charsets are used.
.TP
\f[B]\f[CB]\-\-escape\-surrounding\-space\f[B]\f[R], \f[B]\f[CB]\-\-no\-escape\-surrounding\-space\f[B]\f[R]
(Defaults to enabled) A convenience flag that doesn\(cqt really fit
anywhere else: Unlike all the other escapes, this explicitly only works
on leading and trailing spaces in strings, and only when the
\f[CR]\-\-file\f[R] option is not given.
This lets you visualize leading/trailing spaces in shell variables (eg
\f[CR]p \(dq$foo\(dq\f[R])
.TP
\f[B]\f[CB]\-p\f[B]\f[R], \f[B]\f[CB]\-\-print\f[B]\f[R], \f[B]\f[CB]\-\-print=\f[B]\f[BI]CHARSET\f[B]\f[R]
Print characters, unchanged, without escaping them.
Unlike the other actions, using \f[CR]\-\-print\f[R] will not mark
values as \(lqescaped\(rq for the purposes of
\f[CR]\-\-check\-escapes\f[R].
.TP
\f[B]\f[CB]\-d\f[B]\f[R], \f[B]\f[CB]\-\-delete\f[B]\f[R], \f[B]\f[CB]\-\-delete=\f[B]\f[BI]CHARSET\f[B]\f[R]
Delete characters from the output by not printing anything.
Deleted characters are considered \(lqescaped\(rq for the purposes of
\f[CR]\-\-check\-escape\f[R].
.TP
\f[B]\f[CB]\-.\f[B]\f[R], \f[B]\f[CB]\-\-dot\f[B]\f[R], \f[B]\f[CB]\-\-dot=\f[B]\f[BI]CHARSET\f[B]\f[R]
Replaces characters by simply printing a single period (\f[CR].\f[R]).
(Note: Multibyte characters are still represented by a single period.)
.TP
\f[B]\f[CB]\-r\f[B]\f[R], \f[B]\f[CB]\-\-replace\f[B]\f[R], \f[B]\f[CB]\-\-replace=\f[B]\f[BI]CHARSET\f[B]\f[R]
Identical to \f[CR]\-\-dot\f[R], except instead of a period, the
replacement character (\f[CR]\(rsuFFFD\f[R]) is printed instead.
.TP
\f[B]\f[CB]\-x\f[B]\f[R], \f[B]\f[CB]\-\-hex\f[B]\f[R], \f[B]\f[CB]\-\-hex=\f[B]\f[BI]CHARSET\f[B]\f[R]
Replaces characters with their hex value (\f[CR]\(rsxHH\f[R]).
Multibyte characters will have each of their bytes printed, in order
they were received.
.TP
\f[B]\f[CB]\-o\f[B]\f[R], \f[B]\f[CB]\-\-octal\f[B]\f[R], \f[B]\f[CB]\-\-octal=\f[B]\f[BI]CHARSET\f[B]\f[R]
Like \f[CR]\-\-hex\f[R], except octal escapes (\f[CR]\(rs###\f[R]) are
used instead.
The output is always padded to three bytes (so NUL is
\f[CR]\(rs000\f[R], not \f[CR]\(rs0\f[R]).
.TP
\f[B]\f[CB]\-C\f[B]\f[R], \f[B]\f[CB]\-\-control\-picture\f[B]\f[R], \f[B]\f[CB]\-\-control\-picture=\f[B]\f[BI]CHARSET\f[B]\f[R]
Print out \(lqcontrol pictures\(rq
(\f[CR]U+240x\f[R]\-\f[CR]U+242x\f[R]) corresponding to the character.
Note that only \f[CR]\(rsx00\-\(rsx20\f[R] and \f[CR]\(rsx7F\f[R] have
control pictures assigned to them, and any other characters will yield a
warning (and fall back to \f[CR]\-\-hex\f[R]).
.TP
\f[B]\f[CB]\-\-codepoint\f[B]\f[R], \f[B]\f[CB]\-\-codepoint=\f[B]\f[BI]CHARSET\f[B]\f[R]
Replaces chars with their UTF\-8 codepoints (\f[CR]\(rsu{...}\f[R]).
This only works if the encoding is UTF\-8.
See also \f[CR]\-\-multibyte\-codepoints\f[R]
.TP
\f[B]\f[CB]\-\-highlight\f[B]\f[R], \f[B]\f[CB]\-\-highlight=\f[B]\f[BI]CHARSET\f[B]\f[R]
Prints the character unchanged, but considers it \(lqescaped\(rq.
(Thus, visual effects are added to it like any other escape, and
\f[CR]\-\-check\-escapes\f[R] considers it an escaped character.)
.TP
\f[B]\f[CB]\-\-c\-escape\f[B]\f[R], \f[B]\f[CB]\-\-c\-escape=\f[B]\f[BI]CHARSET\f[B]\f[R]
Use c\-style escapes for the following characters.
(Any other characters will yield a warning, and fall back to
\f[CR]\-\-hex\f[R].):
\f[CR]\(rs0\(rsa\(rsb\(rst\(rsn\(rsv\(rsf\(rsr\(rse\(rs\(rs\f[R]
.TP
\f[B]\f[CB]\-\-default\f[B]\f[R], \f[B]\f[CB]\-\-default=\f[B]\f[BI]CHARSET\f[B]\f[R]
Use the default patterns for chars in \f[B]CHARSET\f[R]
.SH MALFORMED ESCAPES
Escapes for malformed bytes in the encoding.
Like the \(lqESCAPES\(rq section, except these apply to malformed bytes
for the given encoding.
Not all escape actions are possible, as some (eg codepoints) dont make
sense.
The shorthand flags are just upper cases of their equivalent
normal\-escape forms.
.TP
\f[B]\f[CB]\-X\f[B]\f[R], \f[B]\f[CB]\-\-invalid\-hex\f[B]\f[R]
Like \f[CR]\-x\f[R], but only for illegal bytes in the encoding.
.TP
\f[B]\f[CB]\-O\f[B]\f[R], \f[B]\f[CB]\-\-invalid\-octal\f[B]\f[R]
Like \f[CR]\-o\f[R], but only for illegal bytes in the encoding.
.TP
\f[B]\f[CB]\-D\f[B]\f[R], \f[B]\f[CB]\-\-invalid\-delete\f[B]\f[R]
Like \f[CR]\-d\f[R], but only for illegal bytes in the encoding.
.TP
\f[B]\f[CB]\-P\f[B]\f[R], \f[B]\f[CB]\-\-invalid\-print\f[B]\f[R]
Like \f[CR]\-p\f[R], but only for illegal bytes in the encoding.
.TP
\f[B]\f[CB]\-\(at\f[B]\f[R], \f[B]\f[CB]\-\-invalid\-dot\f[B]\f[R]
Like \f[CR]\-.\f[R], but only for illegal bytes in the encoding.
.TP
\f[B]\f[CB]\-R\f[B]\f[R], \f[B]\f[CB]\-\-invalid\-replace\f[B]\f[R]
Like \f[CR]\-r\f[R], but only for illegal bytes in the encoding.
.SH SHORTHANDS
.TP
\f[B]\f[CB]\-l\f[B]\f[R], \f[B]\f[CB]\-\-print\-newlines\f[B]\f[R]
Don\(cqt escape newlines.
(Same as \-\-print=`')
.TP
\f[B]\f[CB]\-w\f[B]\f[R], \f[B]\f[CB]\-\-print\-whitespace\f[B]\f[R]
Don\(cqt escape newline, tab, or space.
(Same as \-\-print=\(cq)
.TP
\f[B]\f[CB]\-s\f[B]\f[R], \f[B]\f[CB]\-\-highlight\-space\f[B]\f[R]
Escape spaces with highlights.
(Same as \-\-highlight=\(cq \(cq)
.TP
\f[B]\f[CB]\-S\f[B]\f[R], \f[B]\f[CB]\-\-control\-picture\-space\f[B]\f[R]
Escape spaces with a \(lqpicture\(rq.
(Same as \-\-control\-picture=\(cq \(cq)
.TP
\f[B]\f[CB]\-B\f[B]\f[R], \f[B]\f[CB]\-\-escape\-backslashes\f[B]\f[R]
Escape backslashes as `\(rs'.
(Same as \-\-c\-escape=`\(rs') (Default if not in colour mode, and no
\-\-escape\-by was given)
.TP
\f[B]\f[CB]\-m\f[B]\f[R], \f[B]\f[CB]\-\-multibyte\-codepoints\f[B]\f[R]
Use codepoints for multibyte chars.
(Same as \-\-codepoint=`').
(Not useful in single\-byte\-only encodings)
.TP
\f[B]\f[CB]\-a\f[B]\f[R], \f[B]\f[CB]\-\-escape\-all\f[B]\f[R]
Mark all characters as escaped.
(Same as \-\-escape\-charset=`') Does nothing alone; it needs to be used
with an \(lqESCAPES\(rq flag
.SH ENCODINGS
(default is normally \f[CR]\-\-utf\-8\f[R].
If POSIXLY_CORRECT is set, \f[CR]\-\-locale\f[R] is the default)
.TP
\f[B]\f[CB]\-E\f[B] \f[BI]ENCODING\f[B]\f[R], \f[B]\f[CB]\-\-encoding=\f[B]\f[BI]ENCODING\f[B]\f[R]
Specify the input\(cqs encoding, which is case\-insensitive.
The encoding must be ASCII\-compatible; encodings which aren\(cqt (eg
UTF\-16) yield a fatal error.
See \f[CR]\-\-list\-encodings\f[R] for a list of encodings that can be
specified.
.TP
\f[B]\f[CB]\-\-list\-encodings\f[B]\f[R]
List all possible encodings, and exit with status 0.
.TP
\f[B]\f[CB]\-b\f[B]\f[R], \f[B]\f[CB]\-\-binary\f[B]\f[R], \f[B]\f[CB]\-\-bytes\f[B]\f[R]
Same as \f[CR]\-\-encoding=binary\f[R].
This encoding considers all bytes \(lqvalid,\(rq and specifying it
changes the \f[CR]\-\-default\-charset\f[R] to also escape all high\-bit
bytes (ie \f[CR]\(rsx80\-\(rsxFF\f[R]).
.TP
\f[B]\f[CB]\-A\f[B]\f[R], \f[B]\f[CB]\-\-ascii\f[B]\f[R]
Same as \f[CR]\-\-encoding=ASCII\f[R].
Like \f[CR]\-\-binary\f[R]/\f[CR]\-\-bytes\f[R], but but high\-bits are
considered \(lqinvalid\(rq.
.TP
\f[B]\f[CB]\-8\f[B]\f[R], \f[B]\f[CB]\-\-utf\-8\f[B]\f[R]
Same as \f[CR]\-\-encoding=UTF\-8\f[R].
The default, unless the environment variable variable
\f[I]POSIXLY_CORRECT\f[R] is set.
.TP
\f[B]\f[CB]\-\-locale\f[B]\f[R]
Same as \f[CR]\-\-encoding=locale\f[R].
This chooses the encoding based on the environment variables
\f[I]LC_ALL\f[R], \f[I]LC_CTYPE\f[R], and \f[I]LANG\f[R] (in that
order).
If the encoding is not valid, or none of the variables are present,
\f[CR]US\-ASCII\f[R] is used as a default.
.SH ENVIRONMENT
The following environment variables affect the execution of
\f[CR]p\f[R]:
.TP
\f[CR]FORCE_COLOR, NO_COLOR\f[R]
Controls \f[CR]\-\-color=auto\f[R].
If FORCE_COLOR is set and nonempty, acts like
\f[CR]\-\-color=always\f[R].
Else, if NO_COLOR is set and nonempty, acts like
\f[CR]\-\-color=never\f[R].
If neither is set to a non\-empty value, \f[CR]\-\-color=auto\f[R]
defaults to \f[CR]\-\-color=always\f[R] when stdout is a tty.
.TP
\f[CR]POSIXLY_CORRECT\f[R]
If present, changes the default \f[CR]\-\-encoding\f[R] to be
\f[CR]locale\f[R] (cf locale(1).), and also disables parsing switches
after arguments (e.g.\ passing in \f[CR]foo \-x\f[R] as arguments will
not interpret \f[CR]\-x\f[R] as a switch).
.TP
\f[CR]P_STANDOUT_BEGIN\f[R], \f[CR]P_STANDOUT_END\f[R]
Beginning and ending escape sequences for \-\-color; Usually don\(cqt
need to be set, as they have sane defaults.
.TP
\f[CR]P_STANDOUT_ERR_BEGIN\f[R], \f[CR]P_STANDOUT_ERR_END\f[R]
Like P_STANDOUT_BEGIN/P_STANDOUT_END, except for invalid bytes (eg 0xC3
in \-\-utf\-8)
.TP
\f[CR]LC_ALL, LC_CTYPE, LANG\f[R]
Checked (in that order) for the encoding when \-\-encoding=locale is
used.
.SH CHARSETS
A \(lq\f[I]CHARSET\f[R]\(rq is a way to specify a range of characters.
They\(cqre based off Regular Expression character classes, with a few
additional options escapes available in addition to the regular escapes
(eg \f[CR]\(rsn\f[R] to escape a newline, or \f[CR]\(rsw\f[R] for
\(lqword\(rq characters).
To use these escapes they must be the \f[I]entire\f[R] regex (so eg
\f[CR]\(ha\(rsE\f[R] doesn\(cqt work):
.IP \(bu 2
\f[CR]\(rsA\f[R] matches all chars (so
\f[CR]\-\-print=\(aq\(rsA\(aq\f[R] would print out every character)
.IP \(bu 2
\f[CR]\(rsN\f[R] matches no chars (so
\f[CR]\-\-delete=\(aq\(rsN\(aq\f[R] would never delete a character)
.IP \(bu 2
\f[CR]\(rsm\f[R] matches multibyte characters (only useful if input data
is multibyte like, UTF\-8.)
.IP \(bu 2
\f[CR]\(rsM\f[R] matches all single\-byte characters (i.e.\ anything
doesn\(cqt match)
.IP \(bu 2
\f[CR]\(rsE\f[R] matches the \(lqdefault charset\(rq (see
\f[CR]\-\-default\-charset\f[R]) (so \f[CR]\-\-hex=\(aq\(rsE\(aq\f[R] is
equivalent to \f[CR]\-\-hex\f[R].)
.PP
(Under the hood, the character classes use ruby\(cqs regular expression
engine, and so anything that\(cqs valid)
.SH EXIT STATUS
Specific exit codes are used:
.IP \(bu 2
0 No problems encountered
.IP \(bu 2
1 A problem opening a file given with \f[CR]\-f\f[R]
.IP \(bu 2
2 Command\-line usage error
.SH BUGS
Bugs can be reported and filed at https://github.com/sampersand/p/
.PP
If you are not using the flatpak version of p, or if you are using an
otherwise out of date or downstream version of it, please make sure that
the bug you want to report hasn\(cqt been already fixed or otherwise
caused by a downstream patch.
